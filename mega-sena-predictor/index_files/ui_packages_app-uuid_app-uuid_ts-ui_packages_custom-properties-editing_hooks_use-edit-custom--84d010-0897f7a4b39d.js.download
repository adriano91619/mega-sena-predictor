"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_app-uuid_app-uuid_ts-ui_packages_custom-properties-editing_hooks_use-edit-custom--84d010"],{48416:(e,t,r)=>{r.d(t,{_:()=>n,c:()=>i});var a=r(4460);let n=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,a.C3)({appId:e})}},62805:(e,t,r)=>{r.d(t,{AA:()=>p,_0:()=>g,ov:()=>h,Jj:()=>u,sq:()=>d,q0:()=>y});let a=["true","false"];var n=r(55882),i=r(5796),s=r(45391),l=r(57572);let o=/[^a-zA-Z0-9_#$-]/gu,c=/[^ -!#-~]/gu;function d(e,t){if(e.length>75)return"Name cannot be longer than 75 characters";if(0===e.length)return"Name is required";for(let r of t)if(r.toLowerCase()===e.toLowerCase())return"Name already exists";let r=x(e,o);if(r)return`Name contains invalid characters: ${r}`}async function u(e,t){let r="Could not check property name";try{let a=await (0,l.lS)((0,i.wYU)({sourceName:e,propertyName:t}));if(a.ok){let{status:e,orgConflicts:r}=await a.json();switch(e){case"valid":return;case"already_exists":return{message:"Name already exists"};case"exists_in_business_orgs":return{message:`The property ${t} already exists in this enterprise`,orgConflicts:r}}}return{message:r}}catch{return{message:r}}}function p(e,t){let r=e.trim().toLowerCase();if(r.length>75)return"Option cannot be longer than 75 characters";if(0===r.length)return"Option cannot be empty";if(t.has(e))return"Option already exists";if(function(e,t){for(let r of t)if(r.toLowerCase()===e)return!0;return!1}(r,t))return"Option already exists";let a=x(e,c);if(a)return`Option contains invalid characters: ${a}`}function h(e){if(e.length>255)return"Description cannot be longer than 255 characters"}let m="Invalid value type",f="Default value should be a valid option";async function g(e,t,r,i=[],s){if(r){if(!e.length)return"Cannot be empty for a required property";switch(t){case"single_select":if((0,n.OD)(e))return m;if(!i.includes(e))return f;break;case"true_false":if((0,n.OD)(e))return m;if(!a.includes(e))return f;break;case"multi_select":if(!(0,n.OD)(e))return m;if(!e.every(e=>i.includes(e)))return f;break;case"string":if((0,n.OD)(e))return m;return await y(e,s)}}}async function y(e,t){if(!e)return;if(e.length>75)return"Cannot be longer than 75 characters";let r=x(e,c);return r?`Contains invalid characters: ${r}`:t&&!await (0,s.N)(t,e)?"Value does not match pattern":void 0}function x(e,t){let r=Array.from(e.matchAll(t));return r?Array.from(new Set(r.map(e=>" "===e[0]?"whitespace":e[0]))).join(", "):""}},91565:(e,t,r)=>{r.d(t,{w:()=>l,x:()=>c});var a=r(55882),n=r(55516),i=r(96540),s=r(62805);function l(e,t,r=[]){let[c,d]=(0,i.useState)(()=>o(e)),u=(0,i.useMemo)(()=>new Map(t.map(e=>[e.propertyName,e.regex||void 0])),[t]),[p,h]=(0,i.useState)({}),[m,f]=(0,i.useState)({});(0,i.useEffect)(()=>{f({}),d(o(e))},r);let g=(0,i.useCallback)(async(e,t)=>{let r=t&&!(0,a.OD)(t)&&await (0,s.q0)(t,u.get(e)),n={...p};delete n[e],r&&(n[e]=r),h(n)},[p,u]),y=(0,n.d)(g,300,{onChangeBehavior:"cancel"});return{propertyValuesMap:(0,i.useMemo)(()=>{let e=Object.entries({...c,...m}).reduce((e,[t,r])=>{let n=c[t],i=t in m;if(!i&&n?.mixed)e[t]={propertyName:t,changed:!1,mixed:!0};else{let s=i&&(n?.mixed||!(0,a.tE)(n?.value,r.value)),l=i?r.value:n?.value;e[t]={value:l,changed:s,propertyName:t,mixed:!1}}return e},{});for(let t of Object.entries(p)){let[r,a]=t,n=e[r];n&&(n.error=a)}return e},[m,c,p]),setPropertyValue:function(e,t){f({...m,[e]:{value:t}}),y(e,t)},revertPropertyValue:function(e){let t={...m};delete t[e],f(t);let r={...p};delete r[e],h(r)},discardChanges:function(){f({})},commitChanges:function(){let e=Object.entries(m).reduce((e,[t,r])=>(e[t]={value:r.value},e),{});d({...c,...e}),f({})}}}function o(e){let t={},r={};for(let n of e)for(let[e,i]of Object.entries(n)){let n=t[e];n?(0,a.tE)(n.value,i)||(t[e]={mixed:!0}):t[e]={value:i},r[e]||(r[e]=0),r[e]++}for(let[a,n]of Object.entries(r))t[a]&&n<e.length&&(t[a]={mixed:!0});return t}function c(e,t){return e.reduce((e,r)=>{let n=t[r.propertyName];return n?.changed&&(e[r.propertyName]=n.value||(0,a.sN)(r.valueType)),e},{})}},20219:(e,t,r)=>{r.d(t,{nb:()=>w,az:()=>j,ze:()=>A,D2:()=>G,vu:()=>ed,hi:()=>V,C$:()=>S,qR:()=>ei});var a=r(74848),n=r(3830),i=r(55882),s=r(38621),l=r(55847),o=r(30631),c=r(96540);let d="(Mixed)",u="default",p="options",h="empty",m={leadingVisual:s.CircleSlashIcon,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",id:"no-matches",groupId:p};function f({propertyName:e,defaultValue:t,allowedValues:r,mixed:n,currentSelection:f,anchorProps:g={},singleSelectMode:y}){var x,v;let[w,j]=(0,c.useState)(!1),[A,N]=(0,c.useState)(""),C=(0,c.useMemo)(()=>(r||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:f.includes(e),groupId:p}}),[r,f]),[S,V]=(0,c.useMemo)(()=>{var e,r,a;let i=function(e,t){let r=t?e.filter(e=>(e.text||"").toLowerCase().includes(t)):e;return 0===r.length?[m]:r}(C,A.toLowerCase()),s=[{groupId:p,key:p}],l=[];return t?(l.unshift((e=t,r=!f.length&&!n,{id:"default",text:`Default (${b(e,"options")})`,selected:r,groupId:u,description:void 0,descriptionVariant:"block"})),s.unshift({groupId:u,key:u})):y&&(l.unshift({text:"(Empty)",key:"(empty)",id:"(empty)",selected:!f.length&&!n,groupId:h,description:"Unset value",descriptionVariant:"block"}),s.unshift({groupId:h,key:h})),[l.concat(i),s]},[y,C,f.length,t,A,n]),_=S.length>7?"medium":"auto",k=(x=f,v=t,n?d:(0,i.sX)(x)?(0,i.sX)(v)?"Choose an option":`Default (${b(v||"")})`:b(x));return{items:S,renderAnchor:t=>(0,a.jsx)(l.Q,{block:!0,alignContent:"start","aria-label":n?d:`Select ${e}`,trailingAction:s.TriangleDownIcon,sx:{minWidth:0,'>span[data-component="buttonContent"]':{flex:1}},...t,...g,children:(0,a.jsx)(o.A,{maxWidth:"100%",title:k,children:k})}),placeholderText:"Search for values",filterValue:A,open:w,onFilterChange:N,onOpenChange:e=>{j(e),N("")},overlayProps:{height:_,width:"medium"},groupMetadata:V}}function g(e){return e.groupId===u}function y(e){return e.groupId===p}function x(e){return e.groupId===h}function b(e,t="selected"){return(0,i.OD)(e)?e.length<=1?e[0]||"":`${e.length} ${t}`:e}let v=["true","false"];function w({anchorRef:e,propertyName:t,defaultValue:r,propertyValue:i,mixed:s,onChange:l,anchorProps:o}){let c=f({propertyName:t,defaultValue:r,allowedValues:v,mixed:s,currentSelection:i?[i]:[],anchorProps:o,singleSelectMode:!0}),d=c.items.find(e=>e.selected);return(0,a.jsx)(n.X,{...c,anchorRef:e,onSelectedChange:e=>{e&&(g(e)||x(e)?l(""):l(e.text||""))},selected:d})}try{w.displayName||(w.displayName="CustomPropertyBooleanSelectPanel")}catch{}function j({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:s,propertyValue:l,mixed:o,onChange:d,anchorProps:u}){let p=f({propertyName:t,defaultValue:r,allowedValues:s,mixed:o,currentSelection:l,anchorProps:u,singleSelectMode:!1}),[h,m]=(0,c.useState)(()=>r&&(0,i.sX)(l)&&!o),x=p.items.filter(e=>h?g(e)||r?.includes(e.text||""):y(e)&&e.selected);return(0,a.jsx)(n.X,{...p,anchorRef:e,onSelectedChange:e=>{let{filterValue:t=""}=p,a=e=>!e.toLowerCase().includes(t.toLowerCase()),n=!h&&e.some(g);if(m(n),n)return d([]);let s=[];t&&(s=h&&!n&&(0,i.OD)(r)?r.filter(a):l.filter(a));let o=e.filter(y).map(e=>e.text||"");d(s.concat(o))},onOpenChange:(e,t)=>{p.onOpenChange(e),e||m(r&&(0,i.sX)(l)&&!o)},selected:x})}try{j.displayName||(j.displayName="CustomPropertyMultiSelectPanel")}catch{}function A({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:i,propertyValue:s,mixed:l,onChange:o,anchorProps:c}){let d=f({propertyName:t,defaultValue:r,allowedValues:i,mixed:l,currentSelection:s?[s]:[],anchorProps:c,singleSelectMode:!0}),u=d.items.find(e=>e.selected);return(0,a.jsx)(n.X,{...d,anchorRef:e,onSelectedChange:e=>{e&&(g(e)||x(e)?o(""):o(e.text||""))},selected:u})}try{A.displayName||(A.displayName="CustomPropertySingleSelectPanel")}catch{}let N="(Mixed)",C={leadingVisual:s.CircleSlashIcon,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",id:"no-matches",className:"color-fg-default"};function S({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:i,propertyValue:s,mixed:l,onChange:o,anchorProps:c}){let d=_(t,r,i,l,s?[s]:[],c),u=d.items.find(e=>e.text&&s===e.text);return(0,a.jsx)(n.X,{...d,anchorRef:e,onSelectedChange:e=>o(e?.text||""),selected:u})}function V({anchorRef:e,propertyName:t,defaultValue:r,allowedValues:i,propertyValue:s,mixed:l,onChange:o,anchorProps:c}){let d=_(t,r,i,l,s,c),u=d.items.filter(e=>e.selected);return(0,a.jsx)(n.X,{...d,anchorRef:e,onSelectedChange:e=>{let{filterValue:t}=d,r=e.map(e=>e.text||"");t?o([...s.filter(e=>!e.toLowerCase().includes(t.toLowerCase())),...r]):o(r)},selected:u})}function _(e,t,r,n,d,u={}){var p,h;let[m,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(""),x=function(e,t){let r=t?e.filter(e=>(e.text||"").toLowerCase().includes(t)):e;return 0===r.length?[C]:r}((0,c.useMemo)(()=>(r||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:d.includes(e)}}),[r,d]),g.toLowerCase()),b=x.length>7?"medium":"auto",v=(p=d,h=t,n?N:(0,i.sX)(p)?(0,i.sX)(h)?"Choose an option":`Default (${k(h||"")})`:k(p));return{items:x,renderAnchor:t=>(0,a.jsx)(l.Q,{block:!0,alignContent:"start","aria-label":n?N:`Select ${e}`,trailingAction:s.TriangleDownIcon,sx:{minWidth:0,'>span[data-component="buttonContent"]':{flex:1}},...t,...u,children:(0,a.jsx)(o.A,{maxWidth:"100%",title:v,children:v})}),placeholderText:"Search for values",filterValue:g,open:m,onFilterChange:y,onOpenChange:e=>{f(e),y("")},overlayProps:{height:b,width:"medium"}}}function k(e){return(0,i.OD)(e)?e.length<=1?e[0]||"":`${e.length} selected`:e}try{S.displayName||(S.displayName="CustomPropertySingleSelectPanel")}catch{}try{V.displayName||(V.displayName="CustomPropertyMultiSelectPanel")}catch{}var P=r(5796),T=r(46584),I=r(75177),L=r(52464),R=r(34614),$=r(73451),O=r(78558),D=r(89323),M=r(87330),E=r(8338),W=r(9591),q=r(55516),U=r(85349),X=r(65607),B=r(34164),z=r(62805);let K={overlayHeaderTitle:"CustomPropertyStringEditor-module__overlayHeaderTitle--vwjAT",anchorButton:"CustomPropertyStringEditor-module__anchorButton--_prb_"},F={messageContainer:"WarningMessage-module__messageContainer--faqxE"};function H({children:e}){return(0,a.jsxs)("div",{className:(0,B.$)(F.messageContainer,"d-flex gap-2 text-small color-fg-attention color-bg-attention border-top border-bottom color-border-attention"),children:[(0,a.jsx)(s.AlertIcon,{size:16}),(0,a.jsx)("div",{children:e})]})}try{H.displayName||(H.displayName="WarningMessage")}catch{}function J(e){var t,r;let{mixed:n,propertyValue:d,defaultValue:u,onChange:p}=e,[h,m]=(0,c.useState)(!1),f=(0,c.useRef)(null),g=(t=d,r=u,n?N:(0,i.sX)(t)?(0,i.sX)(r)?"Set value":`default (${r})`:t);return(0,a.jsx)(U.T,{focusTrapSettings:{initialFocusRef:f},open:h,onOpen:()=>m(!0),onClose:()=>m(!1),side:"outside-bottom",overlayProps:{role:"dialog",sx:{width:320},title:"Set a text value"},renderAnchor:e=>(0,a.jsx)(l.Q,{...e,block:!0,className:K.anchorButton,alignContent:"start",trailingAction:s.TriangleDownIcon,children:(0,a.jsx)(o.A,{maxWidth:"100%",title:g,children:g})}),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:(0,B.$)(n?"border-bottom-0":"border-bottom","p-2 pl-3 d-flex flex-justify-between flex-items-center gap-2"),children:[(0,a.jsx)("div",{className:(0,B.$)(K.overlayHeaderTitle,"text-bold"),children:"Set a text value"}),(0,a.jsx)(M.K,{ref:f,"aria-label":"Close",variant:"invisible",icon:s.XIcon,onClick:()=>m(!1)})]}),n&&(0,a.jsx)(H,{children:"Property has mixed values"}),h&&(0,a.jsx)(Q,{...e,onCancel:()=>m(!1),onChange:e=>{p(e),m(!1)}})]})})}function Q({propertyValue:e,defaultValue:t,regexPattern:r,orgName:n,mixed:i,onCancel:o,onChange:d}){let u=(0,c.useRef)(null),p=!!t,[h,m]=(0,c.useState)(!!t&&!e&&!i),[f,g]=(0,c.useState)(()=>{var r,a;return r=e,a=t,i?"":r||a||""}),[y,x]=(0,c.useState)(),b=async e=>{var t,a,n;let i=await (t=e,a=p,n=r,!t&&a?"This property is required and can\u2019t be blank":(0,z.q0)(t,n||void 0));return x(i),i},v=(0,q.d)(b,300,{onChangeBehavior:"cancel"}),w=async e=>{m(!1),g(e),v(e)},j=async()=>{if(await b(f))return u.current?.focus();d(h?"":f)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)($.A,{children:[(0,a.jsx)($.A.Label,{visuallyHidden:!0,children:"Edit value"}),(0,a.jsx)(W.A,{block:!0,ref:u,value:f,placeholder:"Enter a value",onChange:e=>w(e.target.value),trailingAction:f?(0,a.jsx)(W.A.Action,{onClick:()=>w(""),icon:s.XCircleFillIcon,"aria-label":"Clear input"}):(0,a.jsx)(a.Fragment,{})}),y&&(0,a.jsx)($.A.Validation,{variant:"error",children:y})]}),t&&(0,a.jsxs)($.A,{className:"mt-2",children:[(0,a.jsx)(X.A,{checked:h,onChange:e=>{e.target.checked?(m(!0),g(t)):w("")}}),(0,a.jsxs)($.A.Label,{children:["Use default value (",t,")"]}),(0,a.jsxs)($.A.Caption,{children:["Inherited from"," ",(0,a.jsx)(R.A,{inline:!0,href:(0,P.p3r)({owner:n}),children:n})]})]})]}),(0,a.jsxs)("div",{className:"p-3 d-flex flex-justify-end gap-2 border-top",children:[(0,a.jsx)(l.Q,{onClick:o,children:"Cancel"}),(0,a.jsx)(l.Q,{variant:"primary",onClick:j,children:"Apply"})]})]})}try{J.displayName||(J.displayName="CustomPropertyStringEditor")}catch{}try{Q.displayName||(Q.displayName="InnerStringEditor")}catch{}function Z(e){let{valueType:t,defaultValue:r,regex:n,mixed:s,onChange:l,orgName:o,editingRedesignEnabled:c}=e,d=e.propertyValue||(0,i.sN)(t);if(c)switch(t){case"single_select":return(0,a.jsx)(A,{...e,propertyValue:d});case"multi_select":return(0,a.jsx)(j,{...e,propertyValue:d});case"true_false":return(0,a.jsx)(w,{...e,propertyValue:d});case"string":return(0,a.jsx)(J,{propertyValue:d,defaultValue:r,regexPattern:n,mixed:s,orgName:o,onChange:l});default:return null}switch(t){case"single_select":return(0,a.jsx)(S,{...e,propertyValue:d});case"multi_select":return(0,a.jsx)(V,{...e,propertyValue:d});case"true_false":return(0,a.jsx)(S,{...e,allowedValues:["true","false"],propertyValue:d});case"string":return(0,a.jsx)(Y,{...e,propertyValue:d});default:return null}}function Y({propertyValue:e,defaultValue:t,propertyName:r,mixed:n,onChange:i,inputProps:s}){return(0,a.jsx)(W.A,{block:!0,"aria-label":r,onChange:e=>i(e.target.value),value:e,placeholder:n?N:t||"",...s})}try{Z.displayName||(Z.displayName="CustomPropertyInput")}catch{}try{Y.displayName||(Y.displayName="StringPropertyInput")}catch{}function G(e){let{definitions:t,propertyValuesMap:r,orgName:n,showLockMessages:i=!0,showUndo:s=!0}=e,{editableDefinitions:l}=e,o=(0,c.useMemo)(()=>new Set((l||[]).map(e=>e.propertyName)),[l]);return 0===t.length?null:(0,a.jsx)(I.A,{sx:{border:"1px solid",borderColor:"border.muted",borderRadius:2,"div:last-child":{borderBottomWidth:0}},"data-testid":"custom-property-values-table",children:t.map(t=>{let{propertyName:l}=t,c=r[l],d="editableDefinitions"in e&&o.has(l);return(0,a.jsx)(I.A,{sx:{px:3,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"border.default"},"data-testid":"property-row",children:d?(0,a.jsx)(et,{changed:!!c?.changed,mixed:!!c?.mixed,propertyValue:c?.value,definition:t,error:c?.error,onChange:t=>e.setPropertyValue(l,t),onReset:()=>e.revertPropertyValue(l),showUndo:s,orgName:n},l):(0,a.jsx)(ee,{propertyValue:c?.value||t.defaultValue||"",definition:t,showLockMessages:i,orgName:n},l)},l)})})}function ee({propertyValue:e,definition:t,showLockMessages:r,orgName:n}){let{description:i}=t;return(0,a.jsx)(ea,{label:ei(t),description:i,value:(0,a.jsx)(en,{propertyValue:e,definition:t}),bottomMessage:r&&(0,a.jsxs)(I.A,{sx:{display:"inline"},children:[(0,a.jsxs)(L.A,{sx:{color:"fg.subtle"},children:[(0,a.jsx)(s.ShieldLockIcon,{size:"small"})," Managed by"," "]}),(0,a.jsx)(R.A,{inline:!0,href:(0,P.p3r)({owner:n}),children:n})]})})}function et({propertyValue:e,definition:t,changed:r,mixed:n=!1,error:i,onChange:s,onReset:l,showUndo:o,orgName:c}){let{propertyName:d,description:u}=t,p=(0,T.u)("custom_properties_editing_redesign"),h=`${d}-validation-error`;return(0,a.jsx)(ea,{label:ei(t),description:u,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{sx:{display:"flex",gap:2},children:(0,a.jsx)(Z,{...t,propertyValue:e,mixed:n,onChange:s,orgName:c,editingRedesignEnabled:p,inputProps:i?{"aria-describedby":h}:{}})}),i&&(0,a.jsx)($.A.Validation,{variant:"error",id:h,sx:{pt:2},children:i})]}),trailing:(0,a.jsx)(es,{definition:t,changed:r,onReset:l,onChange:s,showUndo:o})})}let er={display:"grid",flex:1,py:3,gridTemplateColumns:["1fr auto","1fr auto","1fr 220px minmax(39px, auto)"],gridTemplateRows:["auto auto auto auto","auto auto auto auto","1fr min-content min-content"],gridTemplateAreas:['"name trailing" "description trailing" "value trailing" "bottomMessage trailing"','"name trailing" "description trailing" "value trailing" "bottomMessage trailing"','"name value trailing" "description value trailing" "bottomMessage value trailing"']};function ea({label:e,description:t,bottomMessage:r,value:n,trailing:i}){return(0,a.jsxs)($.A,{sx:er,children:[(0,a.jsx)($.A.Label,{sx:{gridArea:"name",pr:3,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center"},"data-testid":"property-name",children:e}),(0,a.jsx)(I.A,{sx:{gridArea:"value",mt:[1,1,0]},children:n}),i?(0,a.jsx)(I.A,{sx:{gridArea:"trailing",pl:2,mt:0},children:i}):null,t&&(0,a.jsx)($.A.Caption,{sx:{gridArea:"description",pr:3,mt:0},children:t}),r?(0,a.jsx)(I.A,{sx:{gridArea:"bottomMessage",mt:1},children:r}):null]})}function en({propertyValue:e,definition:t}){if((0,i.sX)(e))return(0,a.jsx)(L.A,{sx:{color:"fg.muted"},children:"(Empty)"});switch(t.valueType){case"single_select":case"true_false":return(0,a.jsx)(O.A,{sx:{color:"fg.default"},text:(0,a.jsx)(o.A,{title:e,maxWidth:"100%",children:e})});case"multi_select":return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(O.A,{sx:{color:"fg.default",mr:1},text:(0,a.jsx)(o.A,{title:e,maxWidth:"100%",children:e})},e))});case"string":return(0,a.jsx)(o.A,{title:e,maxWidth:"100%",children:e})}}function ei({propertyName:e,required:t}){return`${e}${t?" *":""}`}function es({definition:e,changed:t,showUndo:r=!0,onReset:n,onChange:i}){let{propertyName:l,required:o,source:c}=e,d=`Undo ${l} changes`,u=`Reset ${l} to default value`;return(0,a.jsxs)(D.W,{children:[(0,a.jsx)(D.W.Anchor,{children:(0,a.jsx)(M.K,{icon:s.KebabHorizontalIcon,variant:"invisible","aria-label":`Open reset options for ${l}`,description:"Reset options"})}),(0,a.jsx)(D.W.Overlay,{width:"small",children:(0,a.jsxs)(E.l,{children:[r&&(0,a.jsxs)(E.l.Item,{onSelect:n,"aria-label":d,inactiveText:t?void 0:"No change to undo",children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(s.UndoIcon,{})}),(0,a.jsx)(L.A,{sx:{fontWeight:"bold",display:"block"},children:"Undo"}),(0,a.jsx)(L.A,{sx:{fontSize:"small",color:"fg.subtle"},children:"Reset to the last used value"})]}),o&&(0,a.jsxs)(E.l.Item,{onSelect:()=>i(""),"aria-label":u,children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(s.SyncIcon,{})}),(0,a.jsx)(L.A,{sx:{fontWeight:"bold",display:"block"},children:"Reset to default"}),(0,a.jsxs)(L.A,{sx:{fontSize:"small",color:"fg.subtle"},children:["Inherit the value defined by the ","business"===c.type?"enterprise":"organization"]})]})]})})]})}try{G.displayName||(G.displayName="CustomPropertyValuesTable")}catch{}try{ee.displayName||(ee.displayName="CustomPropertyReadValueRow")}catch{}try{et.displayName||(et.displayName="CustomPropertyEditValueRow")}catch{}try{ea.displayName||(ea.displayName="DataTableRow")}catch{}try{en.displayName||(en.displayName="DisplayPropertyValue")}catch{}try{es.displayName||(es.displayName="ResetDropdown")}catch{}var el=r(46309),eo=r(48521);let ec={propertyRow:"CustomPropertyValuesTableV2-module__propertyRow--LxImw",editRow:"CustomPropertyValuesTableV2-module__editRow--pKPEm",readRow:"CustomPropertyValuesTableV2-module__readRow--LWO1w"};function ed(e){let{definitions:t,propertyValuesMap:r,orgName:n,showUndo:i=!0,showSummary:s}=e,{editableDefinitions:l}=e,o=(0,c.useMemo)(()=>new Set((l||[]).map(e=>e.propertyName)),[l]);return 0===t.length?null:(0,a.jsx)("div",{children:t.map(t=>{let{propertyName:l}=t,c=r[l],d="editableDefinitions"in e&&o.has(l);return(0,a.jsx)("div",{"data-testid":"property-row",className:(0,B.$)(ec.propertyRow,s?ec.readRow:ec.editRow),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-bold fgColor-default mr-2",children:`${l}:`}),(0,a.jsx)("span",{className:"fgColor-muted",children:em(t,c?.value)})]}):d?(0,a.jsx)(eu,{changed:!!c?.changed,mixed:!!c?.mixed,propertyValue:c?.value,definition:t,error:c?.error,onChange:t=>e.setPropertyValue(l,t),onReset:()=>e.revertPropertyValue(l),showUndo:i,orgName:n},l):(0,a.jsx)(ep,{propertyValue:c?.value,definition:t},l)},l)})})}function eu({propertyValue:e,definition:t,changed:r,mixed:n=!1,error:i,onChange:s,onReset:l,showUndo:o,orgName:c}){let{propertyName:d,description:u}=t,p=(0,eo.u)("custom_properties_editing_redesign"),h=`${d}-validation-error`;return(0,a.jsx)(eg,{label:ei(t),description:u,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{sx:{display:"flex",gap:2},children:(0,a.jsx)(Z,{...t,propertyValue:e,mixed:n,onChange:s,orgName:c,editingRedesignEnabled:p,inputProps:i?{"aria-describedby":h}:{}})}),i&&(0,a.jsx)($.A.Validation,{variant:"error",id:h,sx:{pt:2},children:i})]}),trailing:(0,a.jsx)(es,{definition:t,changed:r,onReset:l,onChange:s,showUndo:o})})}function ep({propertyValue:e,definition:t}){let{description:r}=t,n=em(t,e);return(0,a.jsx)(eg,{label:ei(t),description:r,value:(0,a.jsxs)(el.B,{direction:"horizontal",gap:"condensed",children:[(0,a.jsx)(el.B.Item,{className:"flex-shrink-0",children:(0,a.jsx)(s.ShieldLockIcon,{size:"small"})}),(0,a.jsx)(el.B.Item,{children:(0,a.jsx)("span",{children:n})})]})})}let eh=e=>Array.isArray(e)?e.join(", "):e,em=(e,t)=>t||(e.defaultValue?`Default (${eh(e.defaultValue)})`:""),ef={display:"grid",flex:1,py:3,gridTemplateColumns:["1fr auto","1fr auto","1fr 220px minmax(39px, auto)"],gridTemplateRows:["auto auto auto auto","auto auto auto auto","1fr min-content min-content"],gridTemplateAreas:['"name trailing" "description trailing" "value trailing" "bottomMessage trailing"','"name trailing" "description trailing" "value trailing" "bottomMessage trailing"','"name value trailing" "description value trailing" "bottomMessage value trailing"']};function eg({label:e,description:t,bottomMessage:r,value:n,trailing:i}){return(0,a.jsxs)($.A,{sx:ef,children:[(0,a.jsx)($.A.Label,{sx:{gridArea:"name",pr:3,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center"},"data-testid":"property-name",children:e}),(0,a.jsx)(I.A,{sx:{gridArea:"value",mt:[1,1,0]},children:n}),i?(0,a.jsx)(I.A,{sx:{gridArea:"trailing",pl:2,mt:0},children:i}):null,t&&(0,a.jsx)($.A.Caption,{sx:{gridArea:"description",pr:3,mt:0},children:t}),r?(0,a.jsx)(I.A,{sx:{gridArea:"bottomMessage",mt:1},children:r}):null]})}try{ed.displayName||(ed.displayName="CustomPropertyValuesTableV2")}catch{}try{eu.displayName||(eu.displayName="CustomPropertyEditValueRowV2")}catch{}try{ep.displayName||(ep.displayName="CustomPropertyReadValueRowV2")}catch{}try{eg.displayName||(eg.displayName="DataTableRow")}catch{}},55882:(e,t,r)=>{function a(e){return Array.isArray(e)}function n(e){return!e||0===e.length}function i(e){return"multi_select"===e?[]:""}function s(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):e===t}r.d(t,{OD:()=>a,sN:()=>i,sX:()=>n,tE:()=>s})},63412:(e,t,r)=>{r.d(t,{r:()=>n});var a=r(97797);async function n(e){let t=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=t.querySelector("details"),n=r.querySelector("details-dialog"),i=r.querySelector(".js-details-dialog-spinner");e.detailsClass&&r.classList.add(...e.detailsClass.split(" ")),e.dialogClass&&n.classList.add(...e.dialogClass.split(" ")),e.label?n.setAttribute("aria-label",e.label):e.labelledBy&&n.setAttribute("aria-labelledby",e.labelledBy),document.body.append(t);try{let t=await e.content;i.remove(),n.prepend(t)}catch{i.remove();let t=document.createElement("span");t.textContent=e.errorMessage||"Couldn't load the content",t.classList.add("my-6"),t.classList.add("mx-4"),n.prepend(t)}return r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,a.h)(n,"dialog:remove"),r.remove())}),n}},87904:(e,t,r)=>{r.d(t,{Ee:()=>l,b4:()=>o,Ts:()=>s});let a=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"response",void 0),this.response=t,this.name="ResponseError"}};var n=r(84076),i=r(55156);async function s(e,t,r){let s=new Request(t,r);(0,i.t)(s.headers);let l=await self.fetch(s);if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);return!function(e,t,r=!1){let n=t.headers.get("content-type")||"";if(!r&&!n.startsWith("text/html"))throw new a(`expected response with text/html, but was ${n}`,t);if(r&&!(n.startsWith("text/html")||n.startsWith("application/json")))throw new a(`expected response with text/html or application/json, but was ${n}`,t);let i=t.headers.get("x-html-safe");if(i){if(!e.includes(i))throw new a("response X-HTML-Safe nonce did not match",t)}else throw new a("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),l),(0,n.B)(e,await l.text())}function l(e,t,r=1e3,a=[200],n=[202]){return async function r(s){let l=new Request(e,t);(0,i.t)(l.headers);let o=await self.fetch(l);if(n.includes(o.status))return await new Promise(e=>setTimeout(e,s)),r(1.5*s);if(a.includes(o.status))return o;if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);throw Error(`Unexpected ${o.status} response status from poll endpoint`)}(r)}async function o(e,t,r){let{wait:a=500,acceptedStatusCodes:n=[200],max:s=3,attempt:l=0}=r||{},c=async()=>new Promise((r,o)=>{setTimeout(async()=>{try{let a=new Request(e,t);(0,i.t)(a.headers);let o=await self.fetch(a);if(n.includes(o.status)||l+1===s)return r(o);r("retry")}catch(e){o(e)}},a*l)}),d=await c();return"retry"!==d?d:o(e,t,{wait:a,acceptedStatusCodes:n,max:s,attempt:l+1})}},1090:(e,t,r)=>{r.d(t,{A:()=>a});let a=(e,t)=>{let r=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&r.host===a.host&&r.pathname===a.pathname&&r.search===a.search}},84076:(e,t,r)=>{r.d(t,{B:()=>a});function a(e,t){let r=e.createElement("template");return r.innerHTML=t,e.importNode(r.content,!0)}},71828:(e,t,r)=>{r.d(t,{Ax:()=>i.Ax,JW:()=>s,ZV:()=>i.ZV});var a=r(75632),n=r(55156),i=r(13937);function s(e,t){(0,i.JW)(e,async(e,r,i)=>((0,a.G7)("fetch_nonce_headers")&&(0,n.t)(i.headers),t(e,r,i)))}},85457:(e,t,r)=>{r.d(t,{$:()=>i,O:()=>o});var a=r(57572),n=r(96540);function i(e,t){let[r,a]=(0,n.useState)("UNKNOWN");return{isValid:"VALID"===r,showError:"INVALID"===r,validate:async(r,n={})=>{if(a("UNKNOWN"),!t)return!0;let i=await s(r,`${e}/${t}`,n);return a(i),l(i)},reset:(e=!1)=>{a(e?"VALID":"UNKNOWN")}}}let s=async(e,t,r)=>{let n=await (0,a.lS)(t,{...r,method:"POST",body:e});if(n.ok){let{valid:e}=await n.json();return e?"VALID":"INVALID"}return 400===n.status?"INVALID":"UNKNOWN"},l=e=>{switch(e){case"VALID":case"UNKNOWN":return!0;case"INVALID":return!1}},o=async(e,t)=>l(await s(e,t))},45391:(e,t,r)=>{r.d(t,{N:()=>i});var a=r(5796),n=r(85457);let i=async(e,t)=>!(e?.length&&t?.length)||await (0,n.O)({pattern:e,value:t},(0,a.ygX)())},63144:(e,t,r)=>{r.d(t,{Ay:()=>h,YU:()=>u,nA:()=>m});var a=r(63412),n=r(87904),i=r(71828),s=r(68044),l=r(55156);let o=!1;async function c(){let e=document.querySelector("link[rel=sudo-modal]"),t=document.querySelector(".js-sudo-prompt");if(t instanceof HTMLTemplateElement)return t;if(e){let t=await (0,n.Ts)(document,function(e){let t=new URL(e,window.location.origin),r=new URLSearchParams(t.search.slice(1));return r.set("webauthn-support",(0,s.K)()),t.search=r.toString(),t.toString()}(e.href));return document.body.appendChild(t),document.querySelector(".js-sudo-prompt")}throw Error("couldn't load sudo prompt")}let d=!1;async function u(e){if(o)return!1;o=!0,d=!1;let t=(await c()).content.cloneNode(!0),r=await (0,a.r)({content:t}),n=e?.closest("details[open]");return n&&n.removeAttribute("open"),await new Promise(e=>{r.addEventListener("dialog:remove",function(){n&&n.setAttribute("open","open"),o=!1,e()},{once:!0})}),d}async function p(e,t,r="Sudo authentication failed.",a="Too many authentication attempts. Please try again later.",n=".js-sudo-error",i){try{await t.text()}catch(s){let t;if(!s.response)throw s;switch(s.response.status){case 401:t=r;break;case 429:t=a;break;default:t="An unknown error occurred. Please try again later."}if(e.querySelector(n).textContent=t,e.querySelector(n).hidden=!1,i&&(e.querySelector(i).value=""),401!==s.response.status&&429!==s.response.status)throw s;return}d=!0,e.closest("details").removeAttribute("open")}async function h(e){let t=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,l.k)()}});return!!t.ok&&"true"===await t.text()||u(e)}async function m(){let e=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,l.k)()}});return!!e.ok&&"true"===await e.text()||!1}(0,i.JW)(".js-sudo-webauthn-form",async function(e,t){await p(e,t)}),(0,i.JW)(".js-sudo-github-mobile-form",async function(e,t){await p(e,t)}),(0,i.JW)(".js-sudo-totp-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#totp")}),(0,i.JW)(".js-sudo-password-form",async function(e,t){await p(e,t,"Incorrect password.","Too many password attempts. Please wait and try again.",void 0,".js-sudo-password")})},46928:(e,t,r)=>{r.d(t,{Z:()=>u,o:()=>p});var a=r(96540),n=r(47767),i=r(45588),s=r(84976),l=r(1090),o=r(73081),c=r(58135),d=r(76801);let u=()=>{let{routes:e}=a.useContext(d.k),t=(0,n.Zp)();return a.useCallback((n,s={})=>{let d=(0,i.o1)(n).pathname;if(!(0,i.ue)(e,d)||s.reloadDocument){let e="string"==typeof n?n:(0,i.AO)(n);(async()=>{let{softNavigate:t}=await Promise.all([r.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),r.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(r.bind(r,61828));t(e)})()}else{(0,l.A)(location.href,n.toString())||(0,o.SC)("react");let{preventAutofocus:e,...r}=s;(0,a.startTransition)(()=>{t(n,e?{...r,state:{[c.V]:!0,...r.state}}:r)})}},[t,e])},p=()=>{let[e]=(0,s.ok)(),t=u(),{pathname:r}=(0,n.zy)(),i=a.useCallback((a,n={})=>{t({pathname:r,search:(0,s.PI)("function"==typeof a?a(e):a).toString()},n)},[e,t,r]);return[e,i]}},68044:(e,t,r)=>{r.d(t,{K:()=>n,e:()=>i});var a=r(74043);function n(){return(0,a.$j)()?"supported":"unsupported"}async function i(){return await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()?"supported":"unsupported"}},77731:(e,t,r)=>{r.d(t,{X:()=>l});var a=r(74848),n=r(47139),i=r(40776),s=r(10660);let l=({children:e="Preview",feedbackUrl:t,className:r})=>(0,a.jsx)(s.V,{className:r,label:(0,a.jsx)(n.A,{variant:"success",children:e}),link:t?(0,a.jsx)(i.A,{feedbackUrl:t}):void 0});try{l.displayName||(l.displayName="BetaLabel")}catch{}},40776:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(74848),n=r(34614);let i={link:"FeedbackLink-module__link--uY6Kq"},s=({feedbackUrl:e})=>(0,a.jsx)(n.A,{className:i.link,href:e,children:"Give feedback"});try{s.displayName||(s.displayName="FeedbackLink")}catch{}},10660:(e,t,r)=>{r.d(t,{V:()=>i});var a=r(74848),n=r(46309);let i=({label:e,link:t,className:r})=>t?(0,a.jsxs)(n.B,{direction:"horizontal",gap:"condensed",align:"baseline",className:r,children:[e," ",t]}):r?(0,a.jsx)("span",{className:r,children:e}):(0,a.jsx)(a.Fragment,{children:e});try{i.displayName||(i.displayName="LabelWithLink")}catch{}},31993:(e,t,r)=>{r.d(t,{j:()=>a});function a(e){return e}}}]);
//# sourceMappingURL=ui_packages_app-uuid_app-uuid_ts-ui_packages_custom-properties-editing_hooks_use-edit-custom--84d010-4c5b689c1c25.js.map